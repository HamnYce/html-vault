<div class="page form-page">
  <a href="/" class="back">‚Üê Back</a>

  <% if errors && errors.any? %>
    <div class="errors">
      <ul>
        <% errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <% if snippet.id %>
    <% action = "/s/#{snippet.slug}" %>
  <% else %>
    <% action = "/snippets" %>
  <% end %>

  <form action="<%= action %>" method="post" class="form-preview-wrap">
    <% if snippet.id %>
      <input type="hidden" name="_method" value="PATCH">
    <% end %>

    <div class="form-column">
      <div class="form-block">
        <label for="snippet_title">Title</label>
        <input type="text" name="snippet[title]" id="snippet_title" autocomplete="off" value="<%= snippet.title %>">
      </div>
      <div class="form-block">
        <label for="snippet_tags">Tags (comma separated)</label>
        <input type="text" name="snippet[tags]" id="snippet_tags" autocomplete="off" value="<%= snippet.tags %>">
      </div>
      <div class="form-block">
        <label for="snippet-html-content">Raw HTML</label>
        <textarea name="snippet[html_content]" id="snippet-html-content"><%= snippet.html_content %></textarea>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn">Save</button>
      </div>
    </div>

    <div class="preview-pane">
      <div class="preview-label">Live preview</div>
      <iframe id="live-preview" srcdoc="" title="Live preview"></iframe>
    </div>
  </form>
</div>

<script src="/app/live_preview.js"></script>
